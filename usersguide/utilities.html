<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Utilities &mdash; PyTables 3.7.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PyTables File Format" href="file_format.html" />
    <link rel="prev" title="PyTables parameter files" href="parameter_files.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111342564-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111342564-1');
</script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo-pytables-small.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other_material.html">Other Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MIGRATING_TO_3.x.html">Migrating from 2.x to 3.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_pointers.html">Project pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_team.html">Development Team</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyTables</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">PyTables User’s Guide</a> &raquo;</li>
      <li>Utilities</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/usersguide/utilities.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<p>PyTables comes with a couple of utilities that make the life easier to the
user. One is called ptdump and lets you see the contents of a PyTables file
(or generic HDF5 file, if supported). The other one is named ptrepack that
allows to (recursively) copy sub-hierarchies of objects present in a file
into another one, changing, if desired, some of the filters applied to the
leaves during the copy process.</p>
<p>Normally, these utilities will be installed somewhere in your PATH during the
process of installation of the PyTables package, so that you can invoke them
from any place in your file system after the installation has successfully
finished.</p>
<section id="ptdump">
<h2>ptdump<a class="headerlink" href="#ptdump" title="Permalink to this headline">¶</a></h2>
<p>As has been said before, ptdump utility allows you look into the contents of
your PyTables files. It lets you see not only the data but also the metadata
(that is, the <em>structure</em> and additional information in the form of
<em>attributes</em>).</p>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>For instructions on how to use it, just pass the -h flag to the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump -h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: ptdump <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-d<span class="o">]</span> <span class="o">[</span>-a<span class="o">]</span> <span class="o">[</span>-s<span class="o">]</span> <span class="o">[</span>-c<span class="o">]</span> <span class="o">[</span>-i<span class="o">]</span> <span class="o">[</span>-R RANGE<span class="o">]</span>
              filename<span class="o">[</span>:nodepath<span class="o">]</span>

The ptdump utility allows you look into the contents of your PyTables files.
It lets you see not only the data but also the metadata <span class="o">(</span>that is, the
*structure* and additional information <span class="k">in</span> the form of *attributes*<span class="o">)</span>.

positional arguments:
  filename<span class="o">[</span>:nodepath<span class="o">]</span>   name of the HDF5 file to dump

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -v, --verbose         dump more metainformation on nodes
  -d, --dump            dump data information on leaves
  -a, --showattrs       show attributes <span class="k">in</span> nodes <span class="o">(</span>only useful when -v or -d
                        are active<span class="o">)</span>
  -s, --sort            sort output by node name
  -c, --colinfo         show info of columns <span class="k">in</span> tables <span class="o">(</span>only useful when -v or
                        -d are active<span class="o">)</span>
  -i, --idxinfo         show info of indexed columns <span class="o">(</span>only useful when -v or
                        -d are active<span class="o">)</span>
  -R RANGE, --range RANGE
                        <span class="k">select</span> a RANGE of rows <span class="o">(</span><span class="k">in</span> the form <span class="s2">&quot;start,stop,step&quot;</span><span class="o">)</span>
                        during the copy of *all* the leaves. Default values
                        are <span class="s2">&quot;None,None,1&quot;</span>, which means a copy of all the rows.
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</section>
<section id="a-small-tutorial-on-ptdump">
<h3>A small tutorial on ptdump<a class="headerlink" href="#a-small-tutorial-on-ptdump" title="Permalink to this headline">¶</a></h3>
<p>Let’s suppose that we want to know only the <em>structure</em> of a file. In order
to do that, just don’t pass any flag, just the file as parameter.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
</pre></div>
</div>
<p>we can see that the file contains just a leaf object called vlarray1, that is
an instance of VLArray, has 4 rows, and two filters has been used in order to
create it: shuffle and zlib (with a compression level of 1).</p>
<p>Let’s say we want more meta-information. Just add the -v (verbose) flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump -v vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> <span class="m">3</span>
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numpy&#39;</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span><span class="m">2</span>, <span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;irrelevant&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> <span class="m">3</span>
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;python&#39;</span>
</pre></div>
</div>
<p>so we can see more info about the atoms that are the components of the
vlarray1 dataset, i.e. they are scalars of type Int32 and with NumPy
<em>flavor</em>.</p>
<p>If we want information about the attributes on the nodes, we must add the -a
flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump -va vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
  /._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, <span class="m">4</span> attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;GROUP&#39;</span>,
    PYTABLES_FORMAT_VERSION :<span class="o">=</span> <span class="s1">&#39;2.0&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.0&#39;</span><span class="o">]</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> <span class="m">3</span>
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numpy&#39;</span>
  /vlarray1._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, <span class="m">3</span> attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of ints&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span><span class="m">2</span>, <span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;irrelevant&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> <span class="m">3</span>
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;python&#39;</span>
  /vlarray2._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, <span class="m">4</span> attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    FLAVOR :<span class="o">=</span> <span class="s1">&#39;python&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of strings&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Let’s have a look at the real data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump -d vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  Data dump:
<span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="o">[</span><span class="m">5</span> <span class="m">6</span><span class="o">]</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="o">[</span><span class="m">5</span> <span class="m">6</span> <span class="m">7</span><span class="o">]</span>
<span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">[</span><span class="m">5</span> <span class="m">6</span> <span class="m">9</span> <span class="m">8</span><span class="o">]</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  Data dump:
<span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;66&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;6&#39;</span>, <span class="s1">&#39;77&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;6&#39;</span>, <span class="s1">&#39;9&#39;</span>, <span class="s1">&#39;88&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>We see here a data dump of the 4 rows in vlarray1 object, in the form of a
list. Because the object is a VLA, we see a different number of integers on
each row.</p>
<p>Say that we are interested only on a specific <em>row range</em> of the /vlarray1
object:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ptdump -R2,3 -d vlarray1.h5:/vlarray1
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  Data dump:
<span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">[</span><span class="m">5</span> <span class="m">6</span> <span class="m">9</span> <span class="m">8</span><span class="o">]</span>
</pre></div>
</div>
<p>Here, we have specified the range of rows between 2 and 4 (the upper limit
excluded, as usual in Python). See how we have selected only the /vlarray1
object for doing the dump (vlarray1.h5:/vlarray1).</p>
<p>Finally, you can mix several information at once:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump -R2,3 -vad vlarray1.h5:/vlarray1
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> <span class="m">3</span>
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numpy&#39;</span>
  /vlarray1._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, <span class="m">3</span> attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of ints&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
  Data dump:
<span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">[</span><span class="m">5</span> <span class="m">6</span> <span class="m">9</span> <span class="m">8</span><span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="ptrepack">
<span id="ptrepackdescr"></span><h2>ptrepack<a class="headerlink" href="#ptrepack" title="Permalink to this headline">¶</a></h2>
<p>This utility is a very powerful one and lets you copy any leaf, group or
complete subtree into another file. During the copy process you are allowed
to change the filter properties if you want so. Also, in the case of
duplicated pathnames, you can decide if you want to overwrite already
existing nodes on the destination file. Generally speaking, ptrepack can be
useful in may situations, like replicating a subtree in another file, change
the filters in objects and see how affect this to the compression degree or
I/O performance, consolidating specific data in repositories or even
<em>importing</em> generic HDF5 files and create true PyTables counterparts.</p>
<section id="id1">
<h3>Usage<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>For instructions on how to use it, just pass the -h flag to the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack -h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: ptrepack <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-o<span class="o">]</span> <span class="o">[</span>-R RANGE<span class="o">]</span> <span class="o">[</span>--non-recursive<span class="o">]</span>
                <span class="o">[</span>--dest-title TITLE<span class="o">]</span> <span class="o">[</span>--dont-create-sysattrs<span class="o">]</span>
                <span class="o">[</span>--dont-copy-userattrs<span class="o">]</span> <span class="o">[</span>--overwrite-nodes<span class="o">]</span>
                <span class="o">[</span>--complevel COMPLEVEL<span class="o">]</span>
                <span class="o">[</span>--complib <span class="o">{</span>zlib,lzo,bzip2,blosc,blosc:blosclz,blosc:lz4,blosc:lz4hc,blosc:snappy,blosc:zlib,blosc:zstd<span class="o">}]</span>
                <span class="o">[</span>--shuffle <span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span> <span class="o">[</span>--bitshuffle <span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span> <span class="o">[</span>--fletcher32 <span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span>
                <span class="o">[</span>--keep-source-filters<span class="o">]</span> <span class="o">[</span>--chunkshape CHUNKSHAPE<span class="o">]</span>
                <span class="o">[</span>--upgrade-flavors<span class="o">]</span> <span class="o">[</span>--dont-regenerate-old-indexes<span class="o">]</span>
                <span class="o">[</span>--sortby COLUMN<span class="o">]</span> <span class="o">[</span>--checkCSI<span class="o">]</span> <span class="o">[</span>--propindexes<span class="o">]</span>
                sourcefile:sourcegroup destfile:destgroup

This utility is very powerful and lets you copy any leaf, group or <span class="nb">complete</span>
subtree into another file. During the copy process you are allowed to change
the filter properties <span class="k">if</span> you want so. Also, <span class="k">in</span> the <span class="k">case</span> of duplicated
pathnames, you can decide <span class="k">if</span> you want to overwrite already existing nodes on
the destination file. Generally speaking, ptrepack can be useful <span class="k">in</span> may
situations, like replicating a subtree <span class="k">in</span> another file, change the filters <span class="k">in</span>
objects and see how affect this to the compression degree or I/O performance,
consolidating specific data <span class="k">in</span> repositories or even *importing* generic HDF5
files and create <span class="nb">true</span> PyTables counterparts.

positional arguments:
  sourcefile:sourcegroup
                        <span class="nb">source</span> file/group
  destfile:destgroup    destination file/group

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -v, --verbose         show verbose information
  -o, --overwrite       overwrite destination file
  -R RANGE, --range RANGE
                        <span class="k">select</span> a RANGE of rows <span class="o">(</span><span class="k">in</span> the form <span class="s2">&quot;start,stop,step&quot;</span><span class="o">)</span>
                        during the copy of *all* the leaves. Default values
                        are <span class="s2">&quot;None,None,1&quot;</span>, which means a copy of all the rows.
  --non-recursive       <span class="k">do</span> not <span class="k">do</span> a recursive copy. Default is to <span class="k">do</span> it
  --dest-title TITLE    title <span class="k">for</span> the new file <span class="o">(</span><span class="k">if</span> not specified, the <span class="nb">source</span>
                        is copied<span class="o">)</span>
  --dont-create-sysattrs
                        <span class="k">do</span> not create sys attrs <span class="o">(</span>default is to <span class="k">do</span> it<span class="o">)</span>
  --dont-copy-userattrs
                        <span class="k">do</span> not copy the user attrs <span class="o">(</span>default is to <span class="k">do</span> it<span class="o">)</span>
  --overwrite-nodes     overwrite destination nodes <span class="k">if</span> they exist. Default is
                        to not overwrite them
  --complevel COMPLEVEL
                        <span class="nb">set</span> a compression level <span class="o">(</span><span class="m">0</span> <span class="k">for</span> no compression, which
                        is the default<span class="o">)</span>
  --complib <span class="o">{</span>zlib,lzo,bzip2,blosc,blosc:blosclz,blosc:lz4,blosc:lz4hc,blosc:snappy,blosc:zlib,blosc:zstd<span class="o">}</span>
                        <span class="nb">set</span> the compression library to be used during the
                        copy. Defaults to zlib
  --shuffle <span class="o">{</span><span class="m">0</span>,1<span class="o">}</span>       activate or not the shuffle filter <span class="o">(</span>default is active
                        <span class="k">if</span> complevel &gt; <span class="m">0</span><span class="o">)</span>
  --bitshuffle <span class="o">{</span><span class="m">0</span>,1<span class="o">}</span>    activate or not the bitshuffle filter <span class="o">(</span>not active by
                        default<span class="o">)</span>
  --fletcher32 <span class="o">{</span><span class="m">0</span>,1<span class="o">}</span>    whether to activate or not the fletcher32 filter <span class="o">(</span>not
                        active by default<span class="o">)</span>
  --keep-source-filters
                        use the original filters <span class="k">in</span> <span class="nb">source</span> files. The default
                        is not doing that <span class="k">if</span> any of --complevel, --complib,
                        --shuffle --bitshuffle or --fletcher32 option is
                        specified
  --chunkshape CHUNKSHAPE
                        <span class="nb">set</span> a chunkshape. Possible options are: <span class="s2">&quot;keep&quot;</span> <span class="p">|</span>
                        <span class="s2">&quot;auto&quot;</span> <span class="p">|</span> int <span class="p">|</span> tuple. A value of <span class="s2">&quot;auto&quot;</span> computes a
                        sensible value <span class="k">for</span> the chunkshape of the leaves
                        copied. The default is to <span class="s2">&quot;keep&quot;</span> the original value
  --upgrade-flavors     when repacking PyTables <span class="m">1</span>.x or PyTables <span class="m">2</span>.x files, the
                        flavor of leaves will be unset. With this, such a
                        leaves will be serialized as objects with the internal
                        flavor <span class="o">(</span><span class="s1">&#39;numpy&#39;</span> <span class="k">for</span> <span class="m">3</span>.x series<span class="o">)</span>
  --dont-regenerate-old-indexes
                        disable regenerating old indexes. The default is to
                        regenerate old indexes as they are found
  --sortby COLUMN       <span class="k">do</span> a table copy sorted by the index <span class="k">in</span> <span class="s2">&quot;column&quot;</span>. For
                        reversing the order, use a negative value <span class="k">in</span> the
                        <span class="s2">&quot;step&quot;</span> part of <span class="s2">&quot;RANGE&quot;</span> <span class="o">(</span>see <span class="s2">&quot;-r&quot;</span> flag<span class="o">)</span>. Only applies
                        to table objects
  --checkCSI            force the check <span class="k">for</span> a CSI index <span class="k">for</span> the --sortby
                        column
  --propindexes         propagate the indexes existing <span class="k">in</span> original tables. The
                        default is to not propagate them. Only applies to
                        table objects
  --dont-allow-padding  remove the possible padding <span class="k">in</span> compound types <span class="k">in</span>
                        <span class="nb">source</span> files. The default is to propagate it. Only
                        applies to table objects
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</section>
<section id="a-small-tutorial-on-ptrepack">
<h3>A small tutorial on ptrepack<a class="headerlink" href="#a-small-tutorial-on-ptrepack" title="Permalink to this headline">¶</a></h3>
<p>Imagine that we have ended the tutorial 1 (see the output of
examples/tutorial1-1.py), and we want to copy our reduced data (i.e. those
datasets that hangs from the /column group) to another file. First, let’s
remember the content of the examples/tutorial1.h5:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump tutorial1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;Test file&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;Pressure and Name&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/detector <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;Detector information&#39;</span>
/detector/readout <span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>Now, copy the /columns to other non-existing file. That’s easy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack tutorial1.h5:/columns reduced.h5
</pre></div>
</div>
<p>That’s all. Let’s see the contents of the newly created reduced.h5 file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>so, you have copied the children of /columns group into the <em>root</em> of the
reduced.h5 file.</p>
<p>Now, you suddenly realized that what you intended to do was to copy all the
hierarchy, the group /columns itself included. You can do that by just
specifying the destination group:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack tutorial1.h5:/columns reduced.h5:/columns
$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>OK. Much better. But you want to get rid of the existing nodes on the new
file. You can achieve this by adding the -o flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack -o tutorial1.h5:/columns reduced.h5:/columns
$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where you can see how the old contents of the reduced.h5 file has been
overwritten.</p>
<p>You can copy just one single node in the repacking operation and change its
name in destination:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack tutorial1.h5:/detector/readout reduced.h5:/rawdata
$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where the /detector/readout has been copied to /rawdata in destination.</p>
<p>We can change the filter properties as well:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack --complevel<span class="o">=</span><span class="m">1</span> tutorial1.h5:/detector/readout reduced.h5:/rawdata
Problems doing the copy from <span class="s1">&#39;tutorial1.h5:/detector/readout&#39;</span> to <span class="s1">&#39;reduced.h5:/rawdata&#39;</span>
The error was --&gt; tables.exceptions.NodeError: destination group <span class="se">\`</span><span class="sb">`</span>/<span class="se">\`</span><span class="sb">`</span> already has a node named <span class="se">\`</span><span class="sb">`</span>rawdata<span class="sb">``</span><span class="p">;</span> you may want to use the <span class="se">\`</span><span class="sb">`</span>overwrite<span class="sb">``</span> argument
The destination file looks like:
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;utils/ptrepack&quot;</span>, line <span class="m">3</span>, <span class="k">in</span> ?
    main<span class="o">()</span>
  File <span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>, line <span class="m">349</span>, <span class="k">in</span> main
    <span class="nv">stats</span> <span class="o">=</span> stats, <span class="nv">start</span> <span class="o">=</span> start, <span class="nv">stop</span> <span class="o">=</span> stop, <span class="nv">step</span> <span class="o">=</span> step<span class="o">)</span>
  File <span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>, line <span class="m">107</span>, <span class="k">in</span> copy_leaf
    raise RuntimeError, <span class="s2">&quot;Please check that the node names are not</span>
<span class="s2">    duplicated in destination, and if so, add the --overwrite-nodes flag</span>
<span class="s2">    if desired.&quot;</span>
RuntimeError: Please check that the node names are not duplicated <span class="k">in</span>
destination, and <span class="k">if</span> so, add the --overwrite-nodes flag <span class="k">if</span> desired.
</pre></div>
</div>
<p>Ooops! We ran into problems: we forgot that the /rawdata pathname already
existed in destination file. Let’s add the –overwrite-nodes, as the verbose
error suggested:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack --overwrite-nodes --complevel<span class="o">=</span><span class="m">1</span> tutorial1.h5:/detector/readout
reduced.h5:/rawdata
$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>you can check how the filter properties has been changed for the /rawdata
table. Check as the other nodes still exists.</p>
<p>Finally, let’s copy a <em>slice</em> of the readout table in origin to destination,
under a new group called /slices and with the name, for example, aslice:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ptrepack -R1,8,3 tutorial1.h5:/detector/readout reduced.h5:/slices/aslice
$ ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">)</span>, shuffle, zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/slices <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/slices/aslice <span class="o">(</span>Table<span class="o">(</span><span class="m">3</span>,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>note how only 3 rows of the original readout table has been copied to the new
aslice destination. Note as well how the previously nonexistent slices group
has been created in the same operation.</p>
</section>
</section>
<section id="pt2to3">
<h2>pt2to3<a class="headerlink" href="#pt2to3" title="Permalink to this headline">¶</a></h2>
<p>The PyTables 3.x series now follows <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a> coding standard.  This makes
using PyTables more idiomatic with surrounding Python code that also adheres
to this standard.  The primary way that the 2.x series was <em>not</em> PEP 8
compliant was with respect to variable naming conventions.  Approximately 450
API variables were identified and updated for PyTables 3.x.</p>
<p>To ease migration, PyTables ships with a new <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> command line tool.
This tool will run over a file and replace any instances of the old variable
names with the 3.x version of the name.  This tool covers the overwhelming
majority of cases was used to transition the PyTables code base itself!  However,
it may also accidentally also pick up variable names in 3rd party codes that
have <em>exactly</em> the same name as a PyTables’ variable.  This is because <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code>
was implemented using regular expressions rather than a fancier AST-based
method. By using regexes, <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> works on Python and Cython code.</p>
<p><code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> <strong>help:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: pt2to3 <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-r<span class="o">]</span> <span class="o">[</span>-p<span class="o">]</span> <span class="o">[</span>-o OUTPUT<span class="o">]</span> <span class="o">[</span>-i<span class="o">]</span> filename

PyTables <span class="m">2</span>.x -&gt; <span class="m">3</span>.x API transition tool This tool displays to standard out, so
it is common to pipe this to another file: $ pt2to3 oldfile.py &gt; newfile.py

positional arguments:
  filename              path to input file.

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -r, --reverse         reverts changes, going from <span class="m">3</span>.x -&gt; <span class="m">2</span>.x.
  -p, --no-ignore-previous
                        ignores previous_api<span class="o">()</span> calls.
  -o OUTPUT             output file to write to.
  -i, --inplace         overwrites the file <span class="k">in</span>-place.
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> only works on a single file, not a a directory.  However,
a simple BASH script may be written to run <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> over an entire directory
and all sub-directories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">for</span> f <span class="k">in</span> <span class="k">$(</span>find .<span class="k">)</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$f</span>
    pt2to3 <span class="nv">$f</span> &gt; temp.txt
    mv temp.txt <span class="nv">$f</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameter_files.html" class="btn btn-neutral float-left" title="PyTables parameter files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="file_format.html" class="btn btn-neutral float-right" title="PyTables File Format" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011–2021, PyTables maintainers.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>