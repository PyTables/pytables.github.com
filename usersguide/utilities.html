

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Utilities &mdash; PyTables 3.8.1.dev0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PyTables File Format" href="file_format.html" />
    <link rel="prev" title="PyTables parameter files" href="parameter_files.html" />
 
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111342564-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111342564-1');
</script>


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo-pytables-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.8.1.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other_material.html">Other Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MIGRATING_TO_3.x.html">Migrating from 2.x to 3.x</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_pointers.html">Project pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_team.html">Development Team</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyTables</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">PyTables User’s Guide</a> &raquo;</li>
        
      <li>Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/usersguide/utilities.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this heading">¶</a></h1>
<p>PyTables comes with a couple of utilities that make the life easier to the
user. One is called ptdump and lets you see the contents of a PyTables file
(or generic HDF5 file, if supported). The other one is named ptrepack that
allows to (recursively) copy sub-hierarchies of objects present in a file
into another one, changing, if desired, some of the filters applied to the
leaves during the copy process.</p>
<p>Normally, these utilities will be installed somewhere in your PATH during the
process of installation of the PyTables package, so that you can invoke them
from any place in your file system after the installation has successfully
finished.</p>
<section id="ptdump">
<h2>ptdump<a class="headerlink" href="#ptdump" title="Permalink to this heading">¶</a></h2>
<p>As has been said before, ptdump utility allows you look into the contents of
your PyTables files. It lets you see not only the data but also the metadata
(that is, the <em>structure</em> and additional information in the form of
<em>attributes</em>).</p>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h3>
<p>For instructions on how to use it, just pass the -h flag to the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>-h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage:<span class="w"> </span>ptdump<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-v<span class="o">]</span><span class="w"> </span><span class="o">[</span>-d<span class="o">]</span><span class="w"> </span><span class="o">[</span>-a<span class="o">]</span><span class="w"> </span><span class="o">[</span>-s<span class="o">]</span><span class="w"> </span><span class="o">[</span>-c<span class="o">]</span><span class="w"> </span><span class="o">[</span>-i<span class="o">]</span><span class="w"> </span><span class="o">[</span>-R<span class="w"> </span>RANGE<span class="o">]</span>
<span class="w">              </span>filename<span class="o">[</span>:nodepath<span class="o">]</span>

The<span class="w"> </span>ptdump<span class="w"> </span>utility<span class="w"> </span>allows<span class="w"> </span>you<span class="w"> </span>look<span class="w"> </span>into<span class="w"> </span>the<span class="w"> </span>contents<span class="w"> </span>of<span class="w"> </span>your<span class="w"> </span>PyTables<span class="w"> </span>files.
It<span class="w"> </span>lets<span class="w"> </span>you<span class="w"> </span>see<span class="w"> </span>not<span class="w"> </span>only<span class="w"> </span>the<span class="w"> </span>data<span class="w"> </span>but<span class="w"> </span>also<span class="w"> </span>the<span class="w"> </span>metadata<span class="w"> </span><span class="o">(</span>that<span class="w"> </span>is,<span class="w"> </span>the
*structure*<span class="w"> </span>and<span class="w"> </span>additional<span class="w"> </span>information<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>form<span class="w"> </span>of<span class="w"> </span>*attributes*<span class="o">)</span>.

positional<span class="w"> </span>arguments:
<span class="w">  </span>filename<span class="o">[</span>:nodepath<span class="o">]</span><span class="w">   </span>name<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>HDF5<span class="w"> </span>file<span class="w"> </span>to<span class="w"> </span>dump

optional<span class="w"> </span>arguments:
<span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">            </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-v,<span class="w"> </span>--verbose<span class="w">         </span>dump<span class="w"> </span>more<span class="w"> </span>metainformation<span class="w"> </span>on<span class="w"> </span>nodes
<span class="w">  </span>-d,<span class="w"> </span>--dump<span class="w">            </span>dump<span class="w"> </span>data<span class="w"> </span>information<span class="w"> </span>on<span class="w"> </span>leaves
<span class="w">  </span>-a,<span class="w"> </span>--showattrs<span class="w">       </span>show<span class="w"> </span>attributes<span class="w"> </span><span class="k">in</span><span class="w"> </span>nodes<span class="w"> </span><span class="o">(</span>only<span class="w"> </span>useful<span class="w"> </span>when<span class="w"> </span>-v<span class="w"> </span>or<span class="w"> </span>-d
<span class="w">                        </span>are<span class="w"> </span>active<span class="o">)</span>
<span class="w">  </span>-s,<span class="w"> </span>--sort<span class="w">            </span>sort<span class="w"> </span>output<span class="w"> </span>by<span class="w"> </span>node<span class="w"> </span>name
<span class="w">  </span>-c,<span class="w"> </span>--colinfo<span class="w">         </span>show<span class="w"> </span>info<span class="w"> </span>of<span class="w"> </span>columns<span class="w"> </span><span class="k">in</span><span class="w"> </span>tables<span class="w"> </span><span class="o">(</span>only<span class="w"> </span>useful<span class="w"> </span>when<span class="w"> </span>-v<span class="w"> </span>or
<span class="w">                        </span>-d<span class="w"> </span>are<span class="w"> </span>active<span class="o">)</span>
<span class="w">  </span>-i,<span class="w"> </span>--idxinfo<span class="w">         </span>show<span class="w"> </span>info<span class="w"> </span>of<span class="w"> </span>indexed<span class="w"> </span>columns<span class="w"> </span><span class="o">(</span>only<span class="w"> </span>useful<span class="w"> </span>when<span class="w"> </span>-v<span class="w"> </span>or
<span class="w">                        </span>-d<span class="w"> </span>are<span class="w"> </span>active<span class="o">)</span>
<span class="w">  </span>-R<span class="w"> </span>RANGE,<span class="w"> </span>--range<span class="w"> </span>RANGE
<span class="w">                        </span><span class="k">select</span><span class="w"> </span>a<span class="w"> </span>RANGE<span class="w"> </span>of<span class="w"> </span>rows<span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>form<span class="w"> </span><span class="s2">&quot;start,stop,step&quot;</span><span class="o">)</span>
<span class="w">                        </span>during<span class="w"> </span>the<span class="w"> </span>copy<span class="w"> </span>of<span class="w"> </span>*all*<span class="w"> </span>the<span class="w"> </span>leaves.<span class="w"> </span>Default<span class="w"> </span>values
<span class="w">                        </span>are<span class="w"> </span><span class="s2">&quot;None,None,1&quot;</span>,<span class="w"> </span>which<span class="w"> </span>means<span class="w"> </span>a<span class="w"> </span>copy<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>rows.
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</section>
<section id="a-small-tutorial-on-ptdump">
<h3>A small tutorial on ptdump<a class="headerlink" href="#a-small-tutorial-on-ptdump" title="Permalink to this heading">¶</a></h3>
<p>Let’s suppose that we want to know only the <em>structure</em> of a file. In order
to do that, just don’t pass any flag, just the file as parameter.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>vlarray1.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
/vlarray2<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of strings&#39;</span>
</pre></div>
</div>
<p>we can see that the file contains just a leaf object called vlarray1, that is
an instance of VLArray, has 4 rows, and two filters has been used in order to
create it: shuffle and zlib (with a compression level of 1).</p>
<p>Let’s say we want more meta-information. Just add the -v (verbose) flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>-v<span class="w"> </span>vlarray1.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
<span class="w">  </span><span class="nv">atom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>,<span class="w"> </span><span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
<span class="w">  </span><span class="nv">byteorder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;little&#39;</span>
<span class="w">  </span><span class="nv">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="nv">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span>
/vlarray2<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of strings&#39;</span>
<span class="w">  </span><span class="nv">atom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">shape</span><span class="o">=()</span>,<span class="w"> </span><span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
<span class="w">  </span><span class="nv">byteorder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;irrelevant&#39;</span>
<span class="w">  </span><span class="nv">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="nv">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;python&#39;</span>
</pre></div>
</div>
<p>so we can see more info about the atoms that are the components of the
vlarray1 dataset, i.e. they are scalars of type Int32 and with NumPy
<em>flavor</em>.</p>
<p>If we want information about the attributes on the nodes, we must add the -a
flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>-va<span class="w"> </span>vlarray1.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
<span class="w">  </span>/._v_attrs<span class="w"> </span><span class="o">(</span>AttributeSet<span class="o">)</span>,<span class="w"> </span><span class="m">4</span><span class="w"> </span>attributes:
<span class="w">   </span><span class="o">[</span>CLASS<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;GROUP&#39;</span>,
<span class="w">    </span>PYTABLES_FORMAT_VERSION<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;2.0&#39;</span>,
<span class="w">    </span>TITLE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span>,
<span class="w">    </span>VERSION<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.0&#39;</span><span class="o">]</span>
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
<span class="w">  </span><span class="nv">atom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>,<span class="w"> </span><span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
<span class="w">  </span><span class="nv">byteorder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;little&#39;</span>
<span class="w">  </span><span class="nv">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="nv">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span>
<span class="w">  </span>/vlarray1._v_attrs<span class="w"> </span><span class="o">(</span>AttributeSet<span class="o">)</span>,<span class="w"> </span><span class="m">3</span><span class="w"> </span>attributes:
<span class="w">   </span><span class="o">[</span>CLASS<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;VLARRAY&#39;</span>,
<span class="w">    </span>TITLE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>,
<span class="w">    </span>VERSION<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
/vlarray2<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of strings&#39;</span>
<span class="w">  </span><span class="nv">atom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span><span class="m">2</span>,<span class="w"> </span><span class="nv">shape</span><span class="o">=()</span>,<span class="w"> </span><span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
<span class="w">  </span><span class="nv">byteorder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;irrelevant&#39;</span>
<span class="w">  </span><span class="nv">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="nv">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;python&#39;</span>
<span class="w">  </span>/vlarray2._v_attrs<span class="w"> </span><span class="o">(</span>AttributeSet<span class="o">)</span>,<span class="w"> </span><span class="m">4</span><span class="w"> </span>attributes:
<span class="w">   </span><span class="o">[</span>CLASS<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;VLARRAY&#39;</span>,
<span class="w">    </span>FLAVOR<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;python&#39;</span>,
<span class="w">    </span>TITLE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;ragged array of strings&#39;</span>,
<span class="w">    </span>VERSION<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Let’s have a look at the real data:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>-d<span class="w"> </span>vlarray1.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
<span class="w">  </span>Data<span class="w"> </span>dump:
<span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="o">]</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">7</span><span class="o">]</span>
<span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">8</span><span class="o">]</span>
/vlarray2<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of strings&#39;</span>
<span class="w">  </span>Data<span class="w"> </span>dump:
<span class="o">[</span><span class="m">0</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;5&#39;</span>,<span class="w"> </span><span class="s1">&#39;66&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;5&#39;</span>,<span class="w"> </span><span class="s1">&#39;6&#39;</span>,<span class="w"> </span><span class="s1">&#39;77&#39;</span><span class="o">]</span>
<span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;5&#39;</span>,<span class="w"> </span><span class="s1">&#39;6&#39;</span>,<span class="w"> </span><span class="s1">&#39;9&#39;</span>,<span class="w"> </span><span class="s1">&#39;88&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>We see here a data dump of the 4 rows in vlarray1 object, in the form of a
list. Because the object is a VLA, we see a different number of integers on
each row.</p>
<p>Say that we are interested only on a specific <em>row range</em> of the /vlarray1
object:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ptdump<span class="w"> </span>-R2,3<span class="w"> </span>-d<span class="w"> </span>vlarray1.h5:/vlarray1
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
<span class="w">  </span>Data<span class="w"> </span>dump:
<span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">8</span><span class="o">]</span>
</pre></div>
</div>
<p>Here, we have specified the range of rows between 2 and 4 (the upper limit
excluded, as usual in Python). See how we have selected only the /vlarray1
object for doing the dump (vlarray1.h5:/vlarray1).</p>
<p>Finally, you can mix several information at once:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>-R2,3<span class="w"> </span>-vad<span class="w"> </span>vlarray1.h5:/vlarray1
/vlarray1<span class="w"> </span><span class="o">(</span>VLArray<span class="o">(</span><span class="m">3</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>
<span class="w">  </span><span class="nv">atom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>,<span class="w"> </span><span class="nv">dflt</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
<span class="w">  </span><span class="nv">byteorder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;little&#39;</span>
<span class="w">  </span><span class="nv">nrows</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span>
<span class="w">  </span><span class="nv">flavor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;numpy&#39;</span>
<span class="w">  </span>/vlarray1._v_attrs<span class="w"> </span><span class="o">(</span>AttributeSet<span class="o">)</span>,<span class="w"> </span><span class="m">3</span><span class="w"> </span>attributes:
<span class="w">   </span><span class="o">[</span>CLASS<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;VLARRAY&#39;</span>,
<span class="w">    </span>TITLE<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;ragged array of ints&#39;</span>,
<span class="w">    </span>VERSION<span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="s1">&#39;1.3&#39;</span><span class="o">]</span>
<span class="w">  </span>Data<span class="w"> </span>dump:
<span class="o">[</span><span class="m">2</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">5</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">8</span><span class="o">]</span>
</pre></div>
</div>
</section>
</section>
<section id="ptrepack">
<span id="ptrepackdescr"></span><h2>ptrepack<a class="headerlink" href="#ptrepack" title="Permalink to this heading">¶</a></h2>
<p>This utility is a very powerful one and lets you copy any leaf, group or
complete subtree into another file. During the copy process you are allowed
to change the filter properties if you want so. Also, in the case of
duplicated pathnames, you can decide if you want to overwrite already
existing nodes on the destination file. Generally speaking, ptrepack can be
useful in may situations, like replicating a subtree in another file, change
the filters in objects and see how affect this to the compression degree or
I/O performance, consolidating specific data in repositories or even
<em>importing</em> generic HDF5 files and create true PyTables counterparts.</p>
<section id="id1">
<h3>Usage<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>For instructions on how to use it, just pass the -h flag to the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>-h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage:<span class="w"> </span>ptrepack<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-v<span class="o">]</span><span class="w"> </span><span class="o">[</span>-o<span class="o">]</span><span class="w"> </span><span class="o">[</span>-R<span class="w"> </span>RANGE<span class="o">]</span><span class="w"> </span><span class="o">[</span>--non-recursive<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--dest-title<span class="w"> </span>TITLE<span class="o">]</span><span class="w"> </span><span class="o">[</span>--dont-create-sysattrs<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--dont-copy-userattrs<span class="o">]</span><span class="w"> </span><span class="o">[</span>--overwrite-nodes<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--complevel<span class="w"> </span>COMPLEVEL<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--complib<span class="w"> </span><span class="o">{</span>zlib,lzo,bzip2,blosc,blosc:blosclz,blosc:lz4,blosc:lz4hc,blosc:snappy,blosc:zlib,blosc:zstd<span class="o">}]</span>
<span class="w">                </span><span class="o">[</span>--shuffle<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span><span class="w"> </span><span class="o">[</span>--bitshuffle<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span><span class="w"> </span><span class="o">[</span>--fletcher32<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}]</span>
<span class="w">                </span><span class="o">[</span>--keep-source-filters<span class="o">]</span><span class="w"> </span><span class="o">[</span>--chunkshape<span class="w"> </span>CHUNKSHAPE<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--upgrade-flavors<span class="o">]</span><span class="w"> </span><span class="o">[</span>--dont-regenerate-old-indexes<span class="o">]</span>
<span class="w">                </span><span class="o">[</span>--sortby<span class="w"> </span>COLUMN<span class="o">]</span><span class="w"> </span><span class="o">[</span>--checkCSI<span class="o">]</span><span class="w"> </span><span class="o">[</span>--propindexes<span class="o">]</span>
<span class="w">                </span>sourcefile:sourcegroup<span class="w"> </span>destfile:destgroup

This<span class="w"> </span>utility<span class="w"> </span>is<span class="w"> </span>very<span class="w"> </span>powerful<span class="w"> </span>and<span class="w"> </span>lets<span class="w"> </span>you<span class="w"> </span>copy<span class="w"> </span>any<span class="w"> </span>leaf,<span class="w"> </span>group<span class="w"> </span>or<span class="w"> </span><span class="nb">complete</span>
subtree<span class="w"> </span>into<span class="w"> </span>another<span class="w"> </span>file.<span class="w"> </span>During<span class="w"> </span>the<span class="w"> </span>copy<span class="w"> </span>process<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>allowed<span class="w"> </span>to<span class="w"> </span>change
the<span class="w"> </span>filter<span class="w"> </span>properties<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>so.<span class="w"> </span>Also,<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="k">case</span><span class="w"> </span>of<span class="w"> </span>duplicated
pathnames,<span class="w"> </span>you<span class="w"> </span>can<span class="w"> </span>decide<span class="w"> </span><span class="k">if</span><span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>overwrite<span class="w"> </span>already<span class="w"> </span>existing<span class="w"> </span>nodes<span class="w"> </span>on
the<span class="w"> </span>destination<span class="w"> </span>file.<span class="w"> </span>Generally<span class="w"> </span>speaking,<span class="w"> </span>ptrepack<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>useful<span class="w"> </span><span class="k">in</span><span class="w"> </span>may
situations,<span class="w"> </span>like<span class="w"> </span>replicating<span class="w"> </span>a<span class="w"> </span>subtree<span class="w"> </span><span class="k">in</span><span class="w"> </span>another<span class="w"> </span>file,<span class="w"> </span>change<span class="w"> </span>the<span class="w"> </span>filters<span class="w"> </span><span class="k">in</span>
objects<span class="w"> </span>and<span class="w"> </span>see<span class="w"> </span>how<span class="w"> </span>affect<span class="w"> </span>this<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>compression<span class="w"> </span>degree<span class="w"> </span>or<span class="w"> </span>I/O<span class="w"> </span>performance,
consolidating<span class="w"> </span>specific<span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>repositories<span class="w"> </span>or<span class="w"> </span>even<span class="w"> </span>*importing*<span class="w"> </span>generic<span class="w"> </span>HDF5
files<span class="w"> </span>and<span class="w"> </span>create<span class="w"> </span><span class="nb">true</span><span class="w"> </span>PyTables<span class="w"> </span>counterparts.

positional<span class="w"> </span>arguments:
<span class="w">  </span>sourcefile:sourcegroup
<span class="w">                        </span><span class="nb">source</span><span class="w"> </span>file/group
<span class="w">  </span>destfile:destgroup<span class="w">    </span>destination<span class="w"> </span>file/group

optional<span class="w"> </span>arguments:
<span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">            </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-v,<span class="w"> </span>--verbose<span class="w">         </span>show<span class="w"> </span>verbose<span class="w"> </span>information
<span class="w">  </span>-o,<span class="w"> </span>--overwrite<span class="w">       </span>overwrite<span class="w"> </span>destination<span class="w"> </span>file
<span class="w">  </span>-R<span class="w"> </span>RANGE,<span class="w"> </span>--range<span class="w"> </span>RANGE
<span class="w">                        </span><span class="k">select</span><span class="w"> </span>a<span class="w"> </span>RANGE<span class="w"> </span>of<span class="w"> </span>rows<span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>form<span class="w"> </span><span class="s2">&quot;start,stop,step&quot;</span><span class="o">)</span>
<span class="w">                        </span>during<span class="w"> </span>the<span class="w"> </span>copy<span class="w"> </span>of<span class="w"> </span>*all*<span class="w"> </span>the<span class="w"> </span>leaves.<span class="w"> </span>Default<span class="w"> </span>values
<span class="w">                        </span>are<span class="w"> </span><span class="s2">&quot;None,None,1&quot;</span>,<span class="w"> </span>which<span class="w"> </span>means<span class="w"> </span>a<span class="w"> </span>copy<span class="w"> </span>of<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>rows.
<span class="w">  </span>--non-recursive<span class="w">       </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span><span class="k">do</span><span class="w"> </span>a<span class="w"> </span>recursive<span class="w"> </span>copy.<span class="w"> </span>Default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>it
<span class="w">  </span>--dest-title<span class="w"> </span>TITLE<span class="w">    </span>title<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>file<span class="w"> </span><span class="o">(</span><span class="k">if</span><span class="w"> </span>not<span class="w"> </span>specified,<span class="w"> </span>the<span class="w"> </span><span class="nb">source</span>
<span class="w">                        </span>is<span class="w"> </span>copied<span class="o">)</span>
<span class="w">  </span>--dont-create-sysattrs
<span class="w">                        </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>create<span class="w"> </span>sys<span class="w"> </span>attrs<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>it<span class="o">)</span>
<span class="w">  </span>--dont-copy-userattrs
<span class="w">                        </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>copy<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>attrs<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>it<span class="o">)</span>
<span class="w">  </span>--overwrite-nodes<span class="w">     </span>overwrite<span class="w"> </span>destination<span class="w"> </span>nodes<span class="w"> </span><span class="k">if</span><span class="w"> </span>they<span class="w"> </span>exist.<span class="w"> </span>Default<span class="w"> </span>is
<span class="w">                        </span>to<span class="w"> </span>not<span class="w"> </span>overwrite<span class="w"> </span>them
<span class="w">  </span>--complevel<span class="w"> </span>COMPLEVEL
<span class="w">                        </span><span class="nb">set</span><span class="w"> </span>a<span class="w"> </span>compression<span class="w"> </span>level<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>no<span class="w"> </span>compression,<span class="w"> </span>which
<span class="w">                        </span>is<span class="w"> </span>the<span class="w"> </span>default<span class="o">)</span>
<span class="w">  </span>--complib<span class="w"> </span><span class="o">{</span>zlib,lzo,bzip2,blosc,blosc:blosclz,blosc:lz4,blosc:lz4hc,blosc:snappy,blosc:zlib,blosc:zstd<span class="o">}</span>
<span class="w">                        </span><span class="nb">set</span><span class="w"> </span>the<span class="w"> </span>compression<span class="w"> </span>library<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span>used<span class="w"> </span>during<span class="w"> </span>the
<span class="w">                        </span>copy.<span class="w"> </span>Defaults<span class="w"> </span>to<span class="w"> </span>zlib
<span class="w">  </span>--shuffle<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}</span><span class="w">       </span>activate<span class="w"> </span>or<span class="w"> </span>not<span class="w"> </span>the<span class="w"> </span>shuffle<span class="w"> </span>filter<span class="w"> </span><span class="o">(</span>default<span class="w"> </span>is<span class="w"> </span>active
<span class="w">                        </span><span class="k">if</span><span class="w"> </span>complevel<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="o">)</span>
<span class="w">  </span>--bitshuffle<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}</span><span class="w">    </span>activate<span class="w"> </span>or<span class="w"> </span>not<span class="w"> </span>the<span class="w"> </span>bitshuffle<span class="w"> </span>filter<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>active<span class="w"> </span>by
<span class="w">                        </span>default<span class="o">)</span>
<span class="w">  </span>--fletcher32<span class="w"> </span><span class="o">{</span><span class="m">0</span>,1<span class="o">}</span><span class="w">    </span>whether<span class="w"> </span>to<span class="w"> </span>activate<span class="w"> </span>or<span class="w"> </span>not<span class="w"> </span>the<span class="w"> </span>fletcher32<span class="w"> </span>filter<span class="w"> </span><span class="o">(</span>not
<span class="w">                        </span>active<span class="w"> </span>by<span class="w"> </span>default<span class="o">)</span>
<span class="w">  </span>--keep-source-filters
<span class="w">                        </span>use<span class="w"> </span>the<span class="w"> </span>original<span class="w"> </span>filters<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span>files.<span class="w"> </span>The<span class="w"> </span>default
<span class="w">                        </span>is<span class="w"> </span>not<span class="w"> </span>doing<span class="w"> </span>that<span class="w"> </span><span class="k">if</span><span class="w"> </span>any<span class="w"> </span>of<span class="w"> </span>--complevel,<span class="w"> </span>--complib,
<span class="w">                        </span>--shuffle<span class="w"> </span>--bitshuffle<span class="w"> </span>or<span class="w"> </span>--fletcher32<span class="w"> </span>option<span class="w"> </span>is
<span class="w">                        </span>specified
<span class="w">  </span>--chunkshape<span class="w"> </span>CHUNKSHAPE
<span class="w">                        </span><span class="nb">set</span><span class="w"> </span>a<span class="w"> </span>chunkshape.<span class="w"> </span>Possible<span class="w"> </span>options<span class="w"> </span>are:<span class="w"> </span><span class="s2">&quot;keep&quot;</span><span class="w"> </span><span class="p">|</span>
<span class="w">                        </span><span class="s2">&quot;auto&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>int<span class="w"> </span><span class="p">|</span><span class="w"> </span>tuple.<span class="w"> </span>A<span class="w"> </span>value<span class="w"> </span>of<span class="w"> </span><span class="s2">&quot;auto&quot;</span><span class="w"> </span>computes<span class="w"> </span>a
<span class="w">                        </span>sensible<span class="w"> </span>value<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>chunkshape<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>leaves
<span class="w">                        </span>copied.<span class="w"> </span>The<span class="w"> </span>default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;keep&quot;</span><span class="w"> </span>the<span class="w"> </span>original<span class="w"> </span>value
<span class="w">  </span>--upgrade-flavors<span class="w">     </span>when<span class="w"> </span>repacking<span class="w"> </span>PyTables<span class="w"> </span><span class="m">1</span>.x<span class="w"> </span>or<span class="w"> </span>PyTables<span class="w"> </span><span class="m">2</span>.x<span class="w"> </span>files,<span class="w"> </span>the
<span class="w">                        </span>flavor<span class="w"> </span>of<span class="w"> </span>leaves<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>unset.<span class="w"> </span>With<span class="w"> </span>this,<span class="w"> </span>such<span class="w"> </span>a
<span class="w">                        </span>leaves<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>serialized<span class="w"> </span>as<span class="w"> </span>objects<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>internal
<span class="w">                        </span>flavor<span class="w"> </span><span class="o">(</span><span class="s1">&#39;numpy&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">3</span>.x<span class="w"> </span>series<span class="o">)</span>
<span class="w">  </span>--dont-regenerate-old-indexes
<span class="w">                        </span>disable<span class="w"> </span>regenerating<span class="w"> </span>old<span class="w"> </span>indexes.<span class="w"> </span>The<span class="w"> </span>default<span class="w"> </span>is<span class="w"> </span>to
<span class="w">                        </span>regenerate<span class="w"> </span>old<span class="w"> </span>indexes<span class="w"> </span>as<span class="w"> </span>they<span class="w"> </span>are<span class="w"> </span>found
<span class="w">  </span>--sortby<span class="w"> </span>COLUMN<span class="w">       </span><span class="k">do</span><span class="w"> </span>a<span class="w"> </span>table<span class="w"> </span>copy<span class="w"> </span>sorted<span class="w"> </span>by<span class="w"> </span>the<span class="w"> </span>index<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="s2">&quot;column&quot;</span>.<span class="w"> </span>For
<span class="w">                        </span>reversing<span class="w"> </span>the<span class="w"> </span>order,<span class="w"> </span>use<span class="w"> </span>a<span class="w"> </span>negative<span class="w"> </span>value<span class="w"> </span><span class="k">in</span><span class="w"> </span>the
<span class="w">                        </span><span class="s2">&quot;step&quot;</span><span class="w"> </span>part<span class="w"> </span>of<span class="w"> </span><span class="s2">&quot;RANGE&quot;</span><span class="w"> </span><span class="o">(</span>see<span class="w"> </span><span class="s2">&quot;-r&quot;</span><span class="w"> </span>flag<span class="o">)</span>.<span class="w"> </span>Only<span class="w"> </span>applies
<span class="w">                        </span>to<span class="w"> </span>table<span class="w"> </span>objects
<span class="w">  </span>--checkCSI<span class="w">            </span>force<span class="w"> </span>the<span class="w"> </span>check<span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span>CSI<span class="w"> </span>index<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>--sortby
<span class="w">                        </span>column
<span class="w">  </span>--propindexes<span class="w">         </span>propagate<span class="w"> </span>the<span class="w"> </span>indexes<span class="w"> </span>existing<span class="w"> </span><span class="k">in</span><span class="w"> </span>original<span class="w"> </span>tables.<span class="w"> </span>The
<span class="w">                        </span>default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span>not<span class="w"> </span>propagate<span class="w"> </span>them.<span class="w"> </span>Only<span class="w"> </span>applies<span class="w"> </span>to
<span class="w">                        </span>table<span class="w"> </span>objects
<span class="w">  </span>--dont-allow-padding<span class="w">  </span>remove<span class="w"> </span>the<span class="w"> </span>possible<span class="w"> </span>padding<span class="w"> </span><span class="k">in</span><span class="w"> </span>compound<span class="w"> </span>types<span class="w"> </span><span class="k">in</span>
<span class="w">                        </span><span class="nb">source</span><span class="w"> </span>files.<span class="w"> </span>The<span class="w"> </span>default<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span>propagate<span class="w"> </span>it.<span class="w"> </span>Only
<span class="w">                        </span>applies<span class="w"> </span>to<span class="w"> </span>table<span class="w"> </span>objects
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</section>
<section id="a-small-tutorial-on-ptrepack">
<h3>A small tutorial on ptrepack<a class="headerlink" href="#a-small-tutorial-on-ptrepack" title="Permalink to this heading">¶</a></h3>
<p>Imagine that we have ended the tutorial 1 (see the output of
examples/tutorial1-1.py), and we want to copy our reduced data (i.e. those
datasets that hangs from the /column group) to another file. First, let’s
remember the content of the examples/tutorial1.h5:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>tutorial1.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;Test file&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;Pressure and Name&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
/detector<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;Detector information&#39;</span>
/detector/readout<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>Now, copy the /columns to other non-existing file. That’s easy:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>tutorial1.h5:/columns<span class="w"> </span>reduced.h5
</pre></div>
</div>
<p>That’s all. Let’s see the contents of the newly created reduced.h5 file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>so, you have copied the children of /columns group into the <em>root</em> of the
reduced.h5 file.</p>
<p>Now, you suddenly realized that what you intended to do was to copy all the
hierarchy, the group /columns itself included. You can do that by just
specifying the destination group:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>tutorial1.h5:/columns<span class="w"> </span>reduced.h5:/columns
$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>OK. Much better. But you want to get rid of the existing nodes on the new
file. You can achieve this by adding the -o flag:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>-o<span class="w"> </span>tutorial1.h5:/columns<span class="w"> </span>reduced.h5:/columns
$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where you can see how the old contents of the reduced.h5 file has been
overwritten.</p>
<p>You can copy just one single node in the repacking operation and change its
name in destination:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>tutorial1.h5:/detector/readout<span class="w"> </span>reduced.h5:/rawdata
$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/rawdata<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where the /detector/readout has been copied to /rawdata in destination.</p>
<p>We can change the filter properties as well:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>--complevel<span class="o">=</span><span class="m">1</span><span class="w"> </span>tutorial1.h5:/detector/readout<span class="w"> </span>reduced.h5:/rawdata
Problems<span class="w"> </span>doing<span class="w"> </span>the<span class="w"> </span>copy<span class="w"> </span>from<span class="w"> </span><span class="s1">&#39;tutorial1.h5:/detector/readout&#39;</span><span class="w"> </span>to<span class="w"> </span><span class="s1">&#39;reduced.h5:/rawdata&#39;</span>
The<span class="w"> </span>error<span class="w"> </span>was<span class="w"> </span>--&gt;<span class="w"> </span>tables.exceptions.NodeError:<span class="w"> </span>destination<span class="w"> </span>group<span class="w"> </span><span class="se">\`</span><span class="sb">`</span>/<span class="se">\`</span><span class="sb">`</span><span class="w"> </span>already<span class="w"> </span>has<span class="w"> </span>a<span class="w"> </span>node<span class="w"> </span>named<span class="w"> </span><span class="se">\`</span><span class="sb">`</span>rawdata<span class="sb">``</span><span class="p">;</span><span class="w"> </span>you<span class="w"> </span>may<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span>the<span class="w"> </span><span class="se">\`</span><span class="sb">`</span>overwrite<span class="sb">``</span><span class="w"> </span>argument
The<span class="w"> </span>destination<span class="w"> </span>file<span class="w"> </span>looks<span class="w"> </span>like:
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/rawdata<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;utils/ptrepack&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>?
<span class="w">    </span>main<span class="o">()</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">349</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>main
<span class="w">    </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>stats,<span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>start,<span class="w"> </span><span class="nv">stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>stop,<span class="w"> </span><span class="nv">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>step<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">107</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>copy_leaf
<span class="w">    </span>raise<span class="w"> </span>RuntimeError,<span class="w"> </span><span class="s2">&quot;Please check that the node names are not</span>
<span class="s2">    duplicated in destination, and if so, add the --overwrite-nodes flag</span>
<span class="s2">    if desired.&quot;</span>
RuntimeError:<span class="w"> </span>Please<span class="w"> </span>check<span class="w"> </span>that<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>names<span class="w"> </span>are<span class="w"> </span>not<span class="w"> </span>duplicated<span class="w"> </span><span class="k">in</span>
destination,<span class="w"> </span>and<span class="w"> </span><span class="k">if</span><span class="w"> </span>so,<span class="w"> </span>add<span class="w"> </span>the<span class="w"> </span>--overwrite-nodes<span class="w"> </span>flag<span class="w"> </span><span class="k">if</span><span class="w"> </span>desired.
</pre></div>
</div>
<p>Ooops! We ran into problems: we forgot that the /rawdata pathname already
existed in destination file. Let’s add the –overwrite-nodes, as the verbose
error suggested:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>--overwrite-nodes<span class="w"> </span>--complevel<span class="o">=</span><span class="m">1</span><span class="w"> </span>tutorial1.h5:/detector/readout
reduced.h5:/rawdata
$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/rawdata<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>you can check how the filter properties has been changed for the /rawdata
table. Check as the other nodes still exists.</p>
<p>Finally, let’s copy a <em>slice</em> of the readout table in origin to destination,
under a new group called /slices and with the name, for example, aslice:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ptrepack<span class="w"> </span>-R1,8,3<span class="w"> </span>tutorial1.h5:/detector/readout<span class="w"> </span>reduced.h5:/slices/aslice
$<span class="w"> </span>ptdump<span class="w"> </span>reduced.h5
/<span class="w"> </span><span class="o">(</span>RootGroup<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/rawdata<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">10</span>,<span class="o">)</span>,<span class="w"> </span>shuffle,<span class="w"> </span>zlib<span class="o">(</span><span class="m">1</span><span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
/columns<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/columns/name<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure<span class="w"> </span><span class="o">(</span>Array<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Pressure column selection&#39;</span>
/slices<span class="w"> </span><span class="o">(</span>Group<span class="o">)</span><span class="w"> </span><span class="s1">&#39;&#39;</span>
/slices/aslice<span class="w"> </span><span class="o">(</span>Table<span class="o">(</span><span class="m">3</span>,<span class="o">))</span><span class="w"> </span><span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>note how only 3 rows of the original readout table has been copied to the new
aslice destination. Note as well how the previously nonexistent slices group
has been created in the same operation.</p>
</section>
</section>
<section id="pt2to3">
<h2>pt2to3<a class="headerlink" href="#pt2to3" title="Permalink to this heading">¶</a></h2>
<p>The PyTables 3.x series now follows <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a> coding standard.  This makes
using PyTables more idiomatic with surrounding Python code that also adheres
to this standard.  The primary way that the 2.x series was <em>not</em> PEP 8
compliant was with respect to variable naming conventions.  Approximately 450
API variables were identified and updated for PyTables 3.x.</p>
<p>To ease migration, PyTables ships with a new <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> command line tool.
This tool will run over a file and replace any instances of the old variable
names with the 3.x version of the name.  This tool covers the overwhelming
majority of cases was used to transition the PyTables code base itself!  However,
it may also accidentally also pick up variable names in 3rd party codes that
have <em>exactly</em> the same name as a PyTables’ variable.  This is because <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code>
was implemented using regular expressions rather than a fancier AST-based
method. By using regexes, <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> works on Python and Cython code.</p>
<p><code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> <strong>help:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage:<span class="w"> </span>pt2to3<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span><span class="o">[</span>-r<span class="o">]</span><span class="w"> </span><span class="o">[</span>-p<span class="o">]</span><span class="w"> </span><span class="o">[</span>-o<span class="w"> </span>OUTPUT<span class="o">]</span><span class="w"> </span><span class="o">[</span>-i<span class="o">]</span><span class="w"> </span>filename

PyTables<span class="w"> </span><span class="m">2</span>.x<span class="w"> </span>-&gt;<span class="w"> </span><span class="m">3</span>.x<span class="w"> </span>API<span class="w"> </span>transition<span class="w"> </span>tool<span class="w"> </span>This<span class="w"> </span>tool<span class="w"> </span>displays<span class="w"> </span>to<span class="w"> </span>standard<span class="w"> </span>out,<span class="w"> </span>so
it<span class="w"> </span>is<span class="w"> </span>common<span class="w"> </span>to<span class="w"> </span>pipe<span class="w"> </span>this<span class="w"> </span>to<span class="w"> </span>another<span class="w"> </span>file:<span class="w"> </span>$<span class="w"> </span>pt2to3<span class="w"> </span>oldfile.py<span class="w"> </span>&gt;<span class="w"> </span>newfile.py

positional<span class="w"> </span>arguments:
<span class="w">  </span>filename<span class="w">              </span>path<span class="w"> </span>to<span class="w"> </span>input<span class="w"> </span>file.

optional<span class="w"> </span>arguments:
<span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">            </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
<span class="w">  </span>-r,<span class="w"> </span>--reverse<span class="w">         </span>reverts<span class="w"> </span>changes,<span class="w"> </span>going<span class="w"> </span>from<span class="w"> </span><span class="m">3</span>.x<span class="w"> </span>-&gt;<span class="w"> </span><span class="m">2</span>.x.
<span class="w">  </span>-p,<span class="w"> </span>--no-ignore-previous
<span class="w">                        </span>ignores<span class="w"> </span>previous_api<span class="o">()</span><span class="w"> </span>calls.
<span class="w">  </span>-o<span class="w"> </span>OUTPUT<span class="w">             </span>output<span class="w"> </span>file<span class="w"> </span>to<span class="w"> </span>write<span class="w"> </span>to.
<span class="w">  </span>-i,<span class="w"> </span>--inplace<span class="w">         </span>overwrites<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span><span class="k">in</span>-place.
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> only works on a single file, not a a directory.  However,
a simple BASH script may be written to run <code class="docutils literal notranslate"><span class="pre">pt2to3</span></code> over an entire directory
and all sub-directories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">for</span><span class="w"> </span>f<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>find<span class="w"> </span>.<span class="k">)</span>
<span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$f</span>
<span class="w">    </span>pt2to3<span class="w"> </span><span class="nv">$f</span><span class="w"> </span>&gt;<span class="w"> </span>temp.txt
<span class="w">    </span>mv<span class="w"> </span>temp.txt<span class="w"> </span><span class="nv">$f</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="file_format.html" class="btn btn-neutral float-right" title="PyTables File Format" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="parameter_files.html" class="btn btn-neutral float-left" title="PyTables parameter files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2011–2022, PyTables maintainers.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>